# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ª–æ–≥—ñ–Ω–æ–º - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

## –ü—Ä–æ–±–ª–µ–º–∞

Environment Variables –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ, –∞–ª–µ –ª–æ–≥—ñ–Ω –Ω–µ –ø—Ä–∞—Ü—é—î. –ù–∞–π—ñ–º–æ–≤—ñ—Ä–Ω—ñ—à–µ, **–ø—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—ñ `profiles`**.

## –†—ñ—à–µ–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —î –ø—Ä–æ—Ñ—ñ–ª—å

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Supabase Dashboard**
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Table Editor** ‚Üí **profiles**
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —î –∑–∞–ø–∏—Å –∑ email `at@herorooms.de`

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ—Ñ—ñ–ª—å (—è–∫—â–æ –π–æ–≥–æ –Ω–µ–º–∞—î)

**–í–∞—Ä—ñ–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ SQL Editor (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)**

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Supabase Dashboard** ‚Üí **SQL Editor**
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `supabase/create_profile_for_user.sql`
3. –°–∫–æ–ø—ñ—é–π—Ç–µ SQL –∫–æ–¥
4. –í—Å—Ç–∞–≤—Ç–µ –≤ SQL Editor
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Run**

**–í–∞—Ä—ñ–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ Table Editor**

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Supabase Dashboard** ‚Üí **Table Editor** ‚Üí **profiles**
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Insert** ‚Üí **Insert row**
3. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å:
   - **id**: –ó–Ω–∞–π–¥—ñ—Ç—å UUID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ **Authentication** ‚Üí **Users** ‚Üí `at@herorooms.de`
   - **name**: `Super Admin`
   - **department**: `facility`
   - **role**: `super_manager`
   - **is_active**: `true`
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Save**

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RLS Policies

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Supabase Dashboard** ‚Üí **Table Editor** ‚Üí **profiles**
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –≤–∫–ª–∞–¥–∫–∏ **Policies**
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —î policy –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é:
   - Policy name: `Users can view own profile`
   - Policy: `SELECT` –¥–ª—è `auth.uid() = id`

–Ø–∫—â–æ policies –Ω–µ–º–∞—î –∞–±–æ –≤–æ–Ω–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ:
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **SQL Editor**
2. –í–∏–∫–æ–Ω–∞–π—Ç–µ `supabase/fix_profiles_rls_no_recursion.sql`

### –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥—ñ–Ω

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–∞–π—Ç –Ω–∞ Vercel
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Console** (F12)
3. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ª–æ–≥—ñ–Ω–∏—Ç–∏—Å—è:
   - Email: `at@herorooms.de`
   - Password: `Tsero6730451!`
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ:
   - –ú–∞—î –∑'—è–≤–∏—Ç–∏—Å—è: `‚úÖ Profile found: Super Admin super_manager facility`
   - –Ø–∫—â–æ –≤—Å–µ —â–µ –ø–æ–º–∏–ª–∫–∞ - –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –ª–æ–≥–∏ –∑ –∫–æ–Ω—Å–æ–ª—ñ

## –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ SQL

–í–∏–∫–æ–Ω–∞–π—Ç–µ –≤ SQL Editor:

```sql
-- –ó–Ω–∞–π—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
SELECT id, email FROM auth.users WHERE email = 'at@herorooms.de';

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å
SELECT * FROM profiles WHERE id = (
  SELECT id FROM auth.users WHERE email = 'at@herorooms.de'
);
```

–Ø–∫—â–æ –¥—Ä—É–≥–∏–π –∑–∞–ø–∏—Ç –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç - –ø—Ä–æ—Ñ—ñ–ª—å –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ, –≤–∏–∫–æ–Ω–∞–π—Ç–µ `supabase/create_profile_for_user.sql`.



# üîå –°—Ç–∞–Ω –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Supabase —Ç–∞ Gemini

**–î–∞—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:** 2 —Å—ñ—á–Ω—è 2026

---

## ‚úÖ Supabase - –ü–Ü–î–ö–õ–Æ–ß–ï–ù–ò–ô –Ü –ü–†–ê–¶–Æ–Ñ

### –°—Ç–∞—Ç—É—Å: üü¢ –ê–ö–¢–ò–í–ù–ò–ô

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
- ‚úÖ Supabase –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ `utils/supabase/client.ts`
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ —É—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- ‚úÖ –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ Supabase Auth
- ‚úÖ –í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ Supabase

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
- **URL:** `https://qcpuzfhawcondygspiok.supabase.co`
- **ANON KEY:** `sb_publishable_cpQrhzVqZRCCeULDWhVJJw_ZIhcLx0Y`
- **–°—Ç–∞—Ç—É—Å:** –ü—Ä–∞—Ü—é—î –∑ fallback –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ –≤ –∫–æ–¥—ñ

**–î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:**
1. **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** - `contexts/WorkerContext.tsx`
2. **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö** - `services/supabaseService.ts`
3. **–í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
4. **Edge Functions** - –≤–∏–∫–ª–∏–∫ —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –Ω–µ–º–∞—î .env.local, —Ç–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è fallback –∑–Ω–∞—á–µ–Ω–Ω—è
# –í –∫–æ–¥—ñ —î —Ö–∞—Ä–¥–∫–æ–¥–∂–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —è–∫ fallback –≤ AccountDashboard.tsx
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚úÖ Supabase –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π —ñ –ø—Ä–∞—Ü—é—î!

---

## ‚ö†Ô∏è Gemini API - –ù–ê–õ–ê–®–¢–û–í–ê–ù–ò–ô –í –ö–û–î–Ü, –ü–û–¢–†–Ü–ë–ù–ê –ü–ï–†–ï–í–Ü–†–ö–ê –í SUPABASE

### –°—Ç–∞—Ç—É—Å: üü° –ü–û–¢–†–ï–ë–£–Ñ –ü–ï–†–ï–í–Ü–†–ö–ò

**–Ø–∫ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:**
- ‚úÖ Edge Function —Å—Ç–≤–æ—Ä–µ–Ω–∞: `supabase/functions/ocr-invoice/index.ts`
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∞ –≤ UI: `components/AccountDashboard.tsx` (—Ä—è–¥–∫–∏ 615-722)
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è OCR –æ–±—Ä–æ–±–∫–∏ —ñ–Ω–≤–æ–π—Å—ñ–≤
- ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ Supabase Dashboard

**–î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:**
1. **OCR –æ–±—Ä–æ–±–∫–∞ —ñ–Ω–≤–æ–π—Å—ñ–≤** - `AccountDashboard.tsx` ‚Üí `handleOcrReal()`
2. **Edge Function** - `supabase/functions/ocr-invoice/index.ts`
3. **–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:** –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –∑ —ñ–Ω–≤–æ–π—Å—ñ–≤ —á–µ—Ä–µ–∑ Google Gemini API

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

### 1. –ß–∏ –∑–∞–¥–µ–ø–ª–æ—î–Ω–∞ Edge Function –≤ Supabase?

**–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
2. –í–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç: `qcpuzfhawcondygspiok`
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Edge Functions**
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —î —Ñ—É–Ω–∫—Ü—ñ—è `ocr-invoice`
5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å (–º–∞—î –±—É—Ç–∏ "Active" –∞–±–æ "Deployed")

**–Ø–∫—â–æ —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–µ–º–∞—î:**
- –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é –∑ –Ω–∞–∑–≤–æ—é `ocr-invoice`
- –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –∑ `supabase/functions/ocr-invoice/index.ts`
- –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é

### 2. –ß–∏ –¥–æ–¥–∞–Ω–æ GEMINI_API_KEY –≤ Secrets?

**–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `ocr-invoice` –≤ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Settings** ‚Üí **Secrets** (–∞–±–æ **Environment Variables**)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —î –∑–º—ñ–Ω–Ω–∞ `GEMINI_API_KEY`
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª—å–Ω–µ (–º–∞—î –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è –∑ `AIza...`)

**–Ø–∫—â–æ –∫–ª—é—á–∞ –Ω–µ–º–∞—î:**
1. –û—Ç—Ä–∏–º–∞–π—Ç–µ API –∫–ª—é—á –Ω–∞ [Google AI Studio](https://aistudio.google.com/app/apikey)
2. –î–æ–¥–∞–π—Ç–µ Secret –≤ Supabase:
   - **Name:** `GEMINI_API_KEY`
   - **Value:** –≤–∞—à –∫–ª—é—á –≤—ñ–¥ Google Gemini
3. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é

### 3. –Ø–∫ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏?

**–í –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Facility ‚Üí Warehouse ‚Üí Add inventory**
2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª –∑ —ñ–Ω–≤–æ–π—Å–æ–º (PDF, JPG, PNG)
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Recognize with OCR"**
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –¥–∞–Ω—ñ —Ä–æ–∑–ø—ñ–∑–Ω–∞—é—Ç—å—Å—è

**–Ø–∫—â–æ –Ω–µ –ø—Ä–∞—Ü—é—î:**
- –í—ñ–¥–∫—Ä–∏–π—Ç–µ Console (F12) –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
- –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –Ω–∞ –ø–æ–º–∏–ª–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Edge Functions ‚Üí Logs

---

## üìä –ü—ñ–¥—Å—É–º–æ–∫

| –°–µ—Ä–≤—ñ—Å | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª—ñ |
|--------|--------|--------|
| **Supabase** | üü¢ –ü—Ä–∞—Ü—é—î | –ü—ñ–¥–∫–ª—é—á–µ–Ω–∏–π, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è, –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è |
| **Gemini API** | üü° –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ | –ö–æ–¥ –≥–æ—Ç–æ–≤–∏–π, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ Supabase |

---

## üîß –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ Gemini

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Supabase Dashboard

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ: https://supabase.com/dashboard/project/qcpuzfhawcondygspiok
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **Edge Functions** ‚Üí `ocr-invoice`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
   - ‚úÖ –§—É–Ω–∫—Ü—ñ—è –∑–∞–¥–µ–ø–ª–æ—î–Ω–∞?
   - ‚úÖ –Ñ Secret `GEMINI_API_KEY`?
   - ‚úÖ –ó–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª—å–Ω–µ?

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É: `npm run dev`
2. –ó–∞–π–¥—ñ—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **Facility ‚Üí Warehouse ‚Üí Add inventory**
4. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —ñ–Ω–≤–æ–π—Å
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Recognize with OCR"**
6. –Ø–∫—â–æ –ø—Ä–∞—Ü—é—î - ‚úÖ Gemini –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π!
7. –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ Supabase

---

## üìù –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Gemini (—è–∫—â–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)

### –ö—Ä–æ–∫ 1: –û—Ç—Ä–∏–º–∞—Ç–∏ API –∫–ª—é—á

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: https://aistudio.google.com/app/apikey
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π API –∫–ª—é—á –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —ñ—Å–Ω—É—é—á–∏–π
3. –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–ª—é—á (—Ñ–æ—Ä–º–∞—Ç: `AIza...`)

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ Edge Function (—è–∫—â–æ –Ω–µ–º–∞—î)

1. Supabase Dashboard ‚Üí **Edge Functions**
2. **Create a new function**
3. **Name:** `ocr-invoice`
4. **Template:** Blank Function
5. –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –∑ `supabase/functions/ocr-invoice/index.ts`
6. **Deploy**

### –ö—Ä–æ–∫ 3: –î–æ–¥–∞—Ç–∏ GEMINI_API_KEY

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `ocr-invoice`
2. **Settings** ‚Üí **Secrets**
3. **Add Secret:**
   - **Name:** `GEMINI_API_KEY`
   - **Value:** –≤–∞—à –∫–ª—é—á –≤—ñ–¥ Google
4. **Save**

### –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. **Settings** ‚Üí **Verify JWT** - –º–∞—î –±—É—Ç–∏ **–í–ò–ú–ö–ù–ï–ù–û** (OFF)
2. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é

### –ö—Ä–æ–∫ 5: –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏

1. –í –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ: **Facility ‚Üí Warehouse ‚Üí Add inventory**
2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —ñ–Ω–≤–æ–π—Å
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Recognize with OCR"**
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

**Supabase:** ‚úÖ –ü–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π —ñ –ø—Ä–∞—Ü—é—î  
**Gemini:** ‚ö†Ô∏è –ö–æ–¥ –≥–æ—Ç–æ–≤–∏–π, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ Supabase Dashboard

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:**  
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Gemini –≤ Supabase Dashboard, —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ OCR —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∞—Ü—é—î.

---

**–î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:** –î–∏–≤—ñ—Ç—å—Å—è `OCR_SETUP.md`
